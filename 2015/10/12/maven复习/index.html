<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Maven复习 - emacsist</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="emacsist" />
  <meta name="description" content="快速升级 利用软链接方式来进行升级 软链接目录： ~/maven/current 代表当前要使用" />

  <meta name="keywords" content="Golang, Java, PostgreSQL, Postgres, MySQL, emacsist, RabbitMQ, Go, emacs, orgmode" />






<meta name="generator" content="Hugo 0.67.1" />


<link rel="canonical" href="https://emacsist.github.io/2015/10/12/maven%E5%A4%8D%E4%B9%A0/" />

<link href="." rel="alternate" type="application/rss+xml" title="emacsist" />
<link href="." rel="feed" type="application/rss+xml" title="emacsist" />



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.1.1" rel="stylesheet">





<meta property="og:title" content="Maven复习" />
<meta property="og:description" content="快速升级 利用软链接方式来进行升级 软链接目录： ~/maven/current 代表当前要使用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://emacsist.github.io/2015/10/12/maven%E5%A4%8D%E4%B9%A0/" />
<meta property="article:published_time" content="2015-10-12T17:03:38+00:00" />
<meta property="article:modified_time" content="2015-10-12T17:03:38+00:00" />
<meta itemprop="name" content="Maven复习">
<meta itemprop="description" content="快速升级 利用软链接方式来进行升级 软链接目录： ~/maven/current 代表当前要使用">
<meta itemprop="datePublished" content="2015-10-12T17:03:38&#43;00:00" />
<meta itemprop="dateModified" content="2015-10-12T17:03:38&#43;00:00" />
<meta itemprop="wordCount" content="5223">



<meta itemprop="keywords" content="maven,java," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Maven复习"/>
<meta name="twitter:description" content="快速升级 利用软链接方式来进行升级 软链接目录： ~/maven/current 代表当前要使用"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">emacsist</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">emacsist</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Maven复习</h1>

      <div class="post-meta">
        <span class="post-time"> 2015-10-12 </span>
        <div class="post-category">
            
              <a href="/categories/java/"> java </a>
            
          </div>
        <span class="more-meta"> 5223 words </span>
        <span class="more-meta"> 11 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#快速升级">快速升级</a></li>
    <li><a href="#配置maven">配置maven</a></li>
    <li><a href="#设置代理">设置代理</a></li>
    <li><a href="#将eclipse运行在jdk上而不是默认的jre上">将eclipse运行在JDK上，而不是默认的JRE上</a></li>
    <li><a href="#maven使用的环境变量">Maven使用的环境变量</a>
      <ul>
        <li><a href="#maven_opts">MAVEN_OPTS</a></li>
        <li><a href="#m2_home">M2_HOME</a></li>
      </ul>
    </li>
    <li><a href="#maven的约定">Maven的约定</a>
      <ul>
        <li><a href="#代码位置">代码位置</a></li>
        <li><a href="#默认scope范围">默认scope范围</a></li>
        <li><a href="#编译输出目录">编译输出目录</a></li>
        <li><a href="#默认的打包方式">默认的打包方式</a></li>
        <li><a href="#包输出目录为">包输出目录为</a></li>
        <li><a href="#自定义源码目录">自定义源码目录</a></li>
        <li><a href="#超-pomxml">超 pom.xml</a></li>
      </ul>
    </li>
    <li><a href="#源码编译级别">源码编译级别</a></li>
    <li><a href="#maven常用命令">Maven常用命令</a></li>
    <li><a href="#生成可执行的jar包">生成可执行的Jar包</a></li>
    <li><a href="#maven的坐标">Maven的坐标</a>
      <ul>
        <li><a href="#groupid">groupId</a></li>
        <li><a href="#artifactid">artifactId</a></li>
        <li><a href="#version">version</a></li>
        <li><a href="#packaging">packaging</a></li>
        <li><a href="#classifier">classifier</a></li>
      </ul>
    </li>
    <li><a href="#maven依赖范围">Maven依赖范围</a>
      <ul>
        <li><a href="#compile">compile</a></li>
        <li><a href="#test">test</a></li>
        <li><a href="#provided">provided</a></li>
        <li><a href="#runtime">runtime</a></li>
        <li><a href="#system">system</a></li>
        <li><a href="#import">import</a></li>
      </ul>
    </li>
    <li><a href="#依赖传递调解">依赖传递调解</a></li>
    <li><a href="#部署到远程仓库">部署到远程仓库</a></li>
    <li><a href="#镜像">镜像</a></li>
    <li><a href="#maven-搜索">Maven 搜索</a></li>
    <li><a href="#clean生命周期">clean生命周期</a></li>
    <li><a href="#default生命周期">default生命周期</a></li>
    <li><a href="#site生命周期">site生命周期</a></li>
    <li><a href="#命令行与生命周期">命令行与生命周期</a></li>
    <li><a href="#为源码打包">为源码打包</a></li>
    <li><a href="#聚合项目">聚合项目</a></li>
    <li><a href="#继承">继承</a></li>
    <li><a href="#可继承的元素">可继承的元素</a></li>
    <li><a href="#dependencymanagement结合继承的作用">dependencyManagement结合继承的作用</a></li>
    <li><a href="#maven的jetty插件使用">Maven的Jetty插件使用</a>
      <ul>
        <li><a href="#httpconnector-参数">httpConnector 参数</a></li>
      </ul>
    </li>
    <li><a href="#maven中的属性-property">Maven中的属性 property</a>
      <ul>
        <li><a href="#内置属性">内置属性</a></li>
        <li><a href="#pom属性">pom属性</a></li>
        <li><a href="#自定义属性">自定义属性</a></li>
        <li><a href="#settings-属性">settings 属性</a></li>
        <li><a href="#java系统属性">Java系统属性</a></li>
        <li><a href="#环境变量属性">环境变量属性</a></li>
      </ul>
    </li>
    <li><a href="#为不同环境使用不同配置">为不同环境使用不同配置</a>
      <ul>
        <li><a href="#一般资源过滤">一般资源过滤</a></li>
        <li><a href="#web-资源过滤">web 资源过滤</a></li>
        <li><a href="#激活-profile">激活 profile</a></li>
      </ul>
    </li>
    <li><a href="#经典的-pomxml-配置例子">经典的 pom.xml 配置例子</a></li>
    <li><a href="#编写maven插件">编写Maven插件</a></li>
    <li><a href="#一个简单的项目">一个简单的项目</a></li>
    <li><a href="#maven-打包分离-jar">Maven 打包分离 jar</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h2 id="快速升级">快速升级</h2>
<p>利用软链接方式来进行升级</p>
<p>软链接目录：<code> ~/maven/current</code> 代表当前要使用的版本
具体某个版本的maven: <code>~/maven/maven3.0</code>
具体某个版本的maven: <code>~/maven/maven3.1</code></p>
<p>当要切换时，将软链接指向某个具体的版本的maven即可。如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ln -s ~/maven3.0 ~/maven/current
</code></pre></div><p>将环境变量，只需要指向<code>~/maven/current</code>即可，这样子，在切换版本时，就不用修改环境变量了.</p>
<h2 id="配置maven">配置maven</h2>
<p>将maven安装目录下的<code>conf</code>目录，复制一份<code>settings.xml</code>到<code>~/.m2/settings.xml</code>中。然后在这里配置maven的环境。在使用IDE时，记得修改maven的配置，指向系统中的maven，而不要使用IDE自带的maven（还有IDE里maven的配置的东西 ）</p>
<h2 id="设置代理">设置代理</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;proxies&gt;
  &lt;proxy&gt;
   &lt;id&gt;my-proxy&lt;/id&gt; &lt;!-- 代理的ID --&gt;
   &lt;active&gt;true&lt;/active&gt;&lt;!-- 是否激活  --&gt;
   &lt;protocol&gt;http&lt;/protocol&gt;&lt;!-- 代理所使用的协议 --&gt;
   &lt;host&gt;ip&lt;/host&gt;&lt;!--这里填写代理服务器的IP地址--&gt;
   &lt;port&gt;port&lt;/port&gt;&lt;!-- 这里填写代理服务器的端口 --&gt;
   &lt;username&gt;usrename&lt;/username&gt;&lt;!-- 代理服务器认证的用户名 --&gt;
   &lt;password&gt;******&lt;/password&gt;&lt;!-- 代理服务器认证的用户密码 --&gt;
   &lt;nonProxyHosts&gt;localhost|127.0.0.1&lt;/nonProxyHosts&gt;&lt;!-- 不需要代理的地址，用|分隔，支持通配符* --&gt;
  &lt;/proxy&gt;
&lt;/proxies&gt;

</code></pre></div><h2 id="将eclipse运行在jdk上而不是默认的jre上">将eclipse运行在JDK上，而不是默认的JRE上</h2>
<p><code>eclipse.ini</code> 文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">在 -vmargs 之前添加以下内容

-vm
/path/to/jdk/bin/javaw.exe<span style="color:#f92672">(</span>windows下<span style="color:#f92672">)</span>
/path/to/jdk/bin/java<span style="color:#f92672">(</span>*nix下<span style="color:#f92672">)</span>
</code></pre></div><h2 id="maven使用的环境变量">Maven使用的环境变量</h2>
<h3 id="maven_opts">MAVEN_OPTS</h3>
<p>这个是将JVM参数，传递给maven，因为maven本质上是Java命令。比如，将这个环境变量的参数值设置为: <code>-Xms128m -Xmx512m</code></p>
<h3 id="m2_home">M2_HOME</h3>
<p>这个环境变量，是指向maven的安装目录的。如<code>~/maven/current</code></p>
<h2 id="maven的约定">Maven的约定</h2>
<h3 id="代码位置">代码位置</h3>
<p>主体代码放在 <code>src/main/java</code>中
测试代码放在 <code>src/test/java</code>中</p>
<h3 id="默认scope范围">默认scope范围</h3>
<p>如果不指定依赖的范围，默认就是 <code>comiple</code></p>
<h3 id="编译输出目录">编译输出目录</h3>
<p>target/classes/</p>
<h3 id="默认的打包方式">默认的打包方式</h3>
<p>jar</p>
<h3 id="包输出目录为">包输出目录为</h3>
<p>target/</p>
<h3 id="自定义源码目录">自定义源码目录</h3>
<p>在<code>build</code>元素下配置:</p>
<p><code>&lt;sourceDirectory&gt;src/java&lt;/sourceDirectory&gt;</code></p>
<p>即可</p>
<h3 id="超-pomxml">超 pom.xml</h3>
<p>它在maven安装目录下的<code>M2_HOME/lib/maven-x.x.x-uber.jar</code>中的<code>org/apache/maven/project/pom-4.0.0.xml</code>目录下.(Maven2)
<code>M2_HOME/lib/maven-model-builder-x.x.x.jar</code>中的<code>org/apache/maven/model/pom-4.0.0.xml</code></p>
<h2 id="源码编译级别">源码编译级别</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
	&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
	&lt;version&gt;3.1&lt;/version&gt;
	&lt;configuration&gt;
		&lt;source&gt;1.7&lt;/source&gt;
		&lt;target&gt;1.7&lt;/target&gt;
	&lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre></div><h2 id="maven常用命令">Maven常用命令</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mvn help:system

mvn clean compile
mvn clean test
mvn clean package
mvn clean install

mvn dependency:list
mvn dependency:tree
mvn dependency:analyze

查看插件的帮助
mvn help:describe -Dplugin<span style="color:#f92672">=</span>org.apache.maven.plugins:maven-compiler-plugin:2.1

用于多模块构建
进入parent项目的根目录，执行以下命令
构建指定模块
mvn clean install -pl 模块1的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径）,模块2的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径）

构建指定模块,以及这些模块所依赖的模块
mvn clean install -pl 模块1的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径）,模块2的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径） -am

构建依赖于指定模块以及该模块本身
mvn clean install -pl 模块的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径） -amd

指定从哪个模块开始构建
mvn clean install -rf 模块1的路径<span style="color:#f92672">(</span>相对于parent的路径,注意是路径）

忽略测试步骤
-Dmaven.test.skip<span style="color:#f92672">=</span>true
</code></pre></div><h2 id="生成可执行的jar包">生成可执行的Jar包</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.4.1&lt;/version&gt;
        &lt;configuration&gt;
        &lt;transformers&gt;
          	&lt;transformer implementation <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&#34;</span>&gt;
          		&lt;mainClass&gt;这里填写你的Main类&lt;/mainClass&gt;
          	&lt;/transformer&gt;
        &lt;/transformers&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre></div><p>使用这个插件打包完时，会生成两个jar，一个是<code>original</code>开头的，这个jar包是不可以执行的，另一个就是可执行的jar包。</p>
<h2 id="maven的坐标">Maven的坐标</h2>
<h3 id="groupid">groupId</h3>
<p>所属的实际项目</p>
<h3 id="artifactid">artifactId</h3>
<p>项目中的某个模块</p>
<h3 id="version">version</h3>
<p>模块的版本</p>
<h3 id="packaging">packaging</h3>
<p>模块的打包方式</p>
<h3 id="classifier">classifier</h3>
<p>定义输出的一些附属构件。</p>
<p>项目构件的文件名的规则一般是：artifactId-version[-classifier].packaging</p>
<h2 id="maven依赖范围">Maven依赖范围</h2>
<h3 id="compile">compile</h3>
<p>编译范围。也是默认的依赖范围。对编译，测试，运行三种classpath都有效。</p>
<h3 id="test">test</h3>
<p>测试依赖范围。只对测试classpath有效。在编译主代码，或者运行项目的使用时，无法使用此依赖。如: JUnit</p>
<h3 id="provided">provided</h3>
<p>已提供依赖范围。对编译和测试classpath有效，但运行时无效。比如：servlet-api，它是tomcat等容器提供的。</p>
<h3 id="runtime">runtime</h3>
<p>运行时依赖。对测试和运行有效，但编译主体代码时无效。如：JDBC驱动。</p>
<h3 id="system">system</h3>
<p>系统范围依赖。它和 provided 一样。但使用system依赖，必须通过 <code>systemPath</code>元素，显式指定依赖文件的路径。这类依赖不是通过maven仓库，而是与本机系统绑定的，极可能是不可移植，应尽管避免使用。</p>
<h3 id="import">import</h3>
<p>导入依赖范围。不会对三种（编译，测试，运行）classpath产生实际影响。</p>
<h2 id="依赖传递调解">依赖传递调解</h2>
<p>原则：路径最近者优先、第一声明者优先</p>
<h2 id="部署到远程仓库">部署到远程仓库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;distributionManagement&gt;
	&lt;repository&gt;
		&lt;id&gt;nexus-releases&lt;/id&gt;
		&lt;name&gt;Nexus Release Repository&lt;/name&gt;
		&lt;url&gt;http://127.0.0.1:8080/nexus/content/repositories/releases/&lt;/url&gt;
	&lt;/repository&gt;
	&lt;snapshotRepository&gt;
		&lt;id&gt;nexus-snapshots&lt;/id&gt;
		&lt;name&gt;Nexus Snapshot Repository&lt;/name&gt;
		&lt;url&gt;http://127.0.0.1:8080/nexus/content/repositories/snapshots/&lt;/url&gt;
	&lt;/snapshotRepository&gt;
&lt;/distributionManagement&gt;

</code></pre></div><p>如果远程仓库需要认证，则在<code>~/.m2/settings.xml</code>里配置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;servers&gt;
	&lt;server&gt;
		&lt;id&gt;nexus-releases&lt;/id&gt;
		&lt;username&gt;admin&lt;/username&gt;
		&lt;password&gt;admin123&lt;/password&gt;
	&lt;/server&gt;
	&lt;server&gt;
		&lt;id&gt;nexus-snapshots&lt;/id&gt;
		&lt;username&gt;admin&lt;/username&gt;
		&lt;password&gt;admin123&lt;/password&gt;
	&lt;/server&gt;
&lt;/servers&gt;

</code></pre></div><h2 id="镜像">镜像</h2>
<p>在<code>~/.m2/settings.xml</code>里配置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;mirrors&gt;
	&lt;mirror&gt;
		&lt;id&gt;nexus-osc&lt;/id&gt;
		&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
		&lt;name&gt;Nexus osc&lt;/name&gt;
		&lt;url&gt;http://maven.oschina.net/content/groups/public/&lt;/url&gt;
	&lt;/mirror&gt;
&lt;/mirrors&gt;

</code></pre></div><p><!-- raw HTML omitted -->*<!-- raw HTML omitted -->表示镜像所有仓库。即对于远程仓库的请求，都会被该URL替代。</p>
<h2 id="maven-搜索">Maven 搜索</h2>
<p><a href="http://mvnrepository.com/">mvnrepository</a></p>
<p><a href="http://maven.oschina.net/home.html">OSChina</a></p>
<h2 id="clean生命周期">clean生命周期</h2>
<ol>
<li>pre-clean</li>
<li>clean</li>
<li>post-clean</li>
</ol>
<h2 id="default生命周期">default生命周期</h2>
<ol>
<li>validate</li>
<li>initialize</li>
<li>generate-sources</li>
<li>process-sources</li>
<li>generate-resources</li>
<li>process-resources</li>
<li>compile</li>
<li>process-classes</li>
<li>generate-test-sources</li>
<li>process-test-sources</li>
<li>generate-test-resources</li>
<li>process-test-resources</li>
<li>test-compile</li>
<li>process-test-classes</li>
<li>test</li>
<li>prepare-package</li>
<li>package</li>
<li>pre-integration-test</li>
<li>integration-test</li>
<li>post-integration-test</li>
<li>verify</li>
<li>install</li>
<li>deploy</li>
</ol>
<h2 id="site生命周期">site生命周期</h2>
<ol>
<li>pre-site</li>
<li>site</li>
<li>post-site</li>
<li>site-deploy</li>
</ol>
<h2 id="命令行与生命周期">命令行与生命周期</h2>
<p>mvn clean: pre-clean, clean阶段</p>
<p>mvn test: default生命周期的形状到test的所有阶段。</p>
<p>mvn clean install: pre-clean, clean以及到default生命周期的开头到install阶段</p>
<p>mvn clean deploy site-deploy: pre-clean, clean以及default生命周期的所有阶段，site生命周期的所有阶段。</p>
<h2 id="为源码打包">为源码打包</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
  		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
			&lt;executions&gt;
				&lt;execution&gt;
					&lt;phase&gt;package&lt;/phase&gt;
					&lt;goals&gt;
						&lt;goal&gt;jar&lt;/goal&gt;
					&lt;/goals&gt;
				&lt;/execution&gt;
			&lt;/executions&gt;
		&lt;/plugin&gt;

</code></pre></div><h2 id="聚合项目">聚合项目</h2>
<p>创建一个新的空白的maven项目.在该<code>pom.xml</code>文件上, 配置如下的内容即可:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;project xmlns<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://maven.apache.org/POM/4.0.0&#34;</span> xmlns:xsi<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> xsi:schemaLocation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span>&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;org.emacsist&lt;/groupId&gt;
  &lt;artifactId&gt;Go&lt;/artifactId&gt;
  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;

  &lt;modules&gt;
  	&lt;module&gt;../mvn&lt;/module&gt;
  	&lt;module&gt;../mvn2&lt;/module&gt;
  &lt;/modules&gt;
&lt;/project&gt;

</code></pre></div><p>注意, <code>&lt;module&gt;../mvn&lt;/module&gt;</code> 这是相对当前项目的其他模块的目录的路径.</p>
<h2 id="继承">继承</h2>
<p>在子模块的pom.xml里配置:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
&lt;parent&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt; &lt;!--父pom的groupId--&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt; &lt;!--父pom的artifactId--&gt;
    &lt;version&gt;1&lt;/version&gt;
	&lt;relativePath&gt;../parent/pom.xml&lt;/relativePath&gt;&lt;!--父pom.xml的位置--&gt;
&lt;/parent&gt;

</code></pre></div><p>在集成时, 别忘记了, 将父模块,也放到聚合模块中.</p>
<h2 id="可继承的元素">可继承的元素</h2>
<ol>
<li>groupId:项目组ID</li>
<li>version:项目版本</li>
<li>description:项目的描述信息</li>
<li>organization:项目的组织信息</li>
<li>inceptionYear:项目的创始年份</li>
<li>url:项目的URL地址</li>
<li>developers:项目的开发者信息</li>
<li>contributors:项目的贡献者信息</li>
<li>distributionManagement:项目的部署配置</li>
<li>issueManagement:项目的缺陷跟踪系统信息</li>
<li>ciManagement:项目的持续集成系统信息</li>
<li>scm:项目的版本控制系统信息</li>
<li>mailingLists:项目的邮件列表信息</li>
<li>properties:算定义的Maven属性</li>
<li>dependencies:项目的依赖配置</li>
<li>dependencyManagement:项目的依赖管理配置</li>
<li>repositoryies:项目的仓库配置</li>
<li>build:包括项目的源码目录配置，输出目录配置。插件配置，插件配置。插件管理配置等</li>
<li>reporting:包括项目的报告输出目录配置，报告插件配置竺。</li>
</ol>
<h2 id="dependencymanagement结合继承的作用">dependencyManagement结合继承的作用</h2>
<p>dependencyManagement 结合继承, 主要是为了统一依赖的版本号.这时,在父pom.xml里使用<code>dependencyManagement</code>,而在子模块里,使用<code>dependencies</code>,但子模块里,并不指定版本号.这样子,它就会使用父的dependencyManagement中指定的依赖的版本了.</p>
<h2 id="maven的jetty插件使用">Maven的Jetty插件使用</h2>
<p><a href="http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html">官方文档</a></p>
<h3 id="httpconnector-参数">httpConnector 参数</h3>
<p>前缀都是：<code>-Djetty.http.xxx=value</code></p>
<h4 id="端口">端口</h4>
<p>默认为 8080 端口
<code>port</code></p>
<p><code>mvn -Djetty.http.port=9999 jetty:run</code></p>
<h4 id="监听主机">监听主机</h4>
<p><code>host</code></p>
<h4 id="指定connector名">指定connector名</h4>
<p><code>name</code></p>
<h4 id="最大空闲时间">最大空闲时间</h4>
<p><code>idleTimeout</code></p>
<h4 id="关闭socket时的延时设置">关闭socket时的延时设置</h4>
<p>soLinger</p>
<h4 id="使用">使用</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> &lt;plugin&gt;
                &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;9.0.6.v20130930&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- Jetty容器配置 --&gt;
                    &lt;httpConnector&gt;
                        &lt;!-- 监听的端口 --&gt;
                        &lt;port&gt;8080&lt;/port&gt;
                    &lt;/httpConnector&gt;
                    &lt;!-- 热部署，间隔多少秒重新扫描文件，默认为0,即不进行热部署 --&gt;
                    &lt;scanIntervalSeconds&gt;1&lt;/scanIntervalSeconds&gt;
                    &lt;!-- web应用配置 --&gt;
                    &lt;webApp&gt;
                        &lt;contextPath&gt;/&lt;/contextPath&gt;
                        &lt;!-- web.xml路径 --&gt;
                        &lt;descriptor&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/WebContent/WEB-INF/web.xml&lt;/descriptor&gt;
			&lt;allowDuplicateFragmentNames&gt;true&lt;/allowDuplicateFragmentNames&gt;
                    &lt;/webApp&gt;
                    &lt;!-- 生成classes的目录 --&gt;
                    &lt;classesDirectory&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/target/classes&lt;/classesDirectory&gt;
                    &lt;webAppSourceDirectory&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/WebContent/&lt;/webAppSourceDirectory&gt;
                &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre></div><h2 id="maven中的属性-property">Maven中的属性 property</h2>
<h3 id="内置属性">内置属性</h3>
<ol>
<li>
<p>${basedir}，表示项目的根目录</p>
</li>
<li>
<p>${version}，表示项目的版本</p>
</li>
</ol>
<h3 id="pom属性">pom属性</h3>
<ol>
<li>
<p>${project.build.sourceDirectory}: 表示项目的主源码目录。默认为<code>src/main/java</code></p>
</li>
<li>
<p>${project.build.testSourceDirectory}: 项目的测试源码目录。默认为<code>src/test/java</code></p>
</li>
<li>
<p>${project.build.directory}: 项目构建输出目录，默认为<code>target/</code></p>
</li>
<li>
<p>${project.outputDirector}: 项目主代码编译输出目录，默认为<code>target/classes/</code></p>
</li>
<li>
<p>${project.testOutputDirectory}: 项目测试代码编译输出目录，默认为<code>target/test-classes/</code></p>
</li>
<li>
<p>${project.groupId}: 项目的groupId</p>
</li>
<li>
<p>${project.artifactId}: 项目的artifactId</p>
</li>
<li>
<p>${project.version}: 项目的version，与${version}等价</p>
</li>
<li>
<p>${project.build.finalName}: 项目打包输出文件名，默认为${project.artifactId}-${project.version}.</p>
</li>
</ol>
<h3 id="自定义属性">自定义属性</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;properties&gt;
    &lt;property&gt;
        &lt;my.prop&gt;hello world&lt;/my.prop&gt;
    &lt;/property&gt;
&lt;/properties&gt;

</code></pre></div><h3 id="settings-属性">settings 属性</h3>
<p>这个可以引用<code>settings.xml</code>文件元素值。如：</p>
<p><code>${settings.localRepository}</code></p>
<h3 id="java系统属性">Java系统属性</h3>
<p>可以通过<code>mvn help:system</code>查看所有该属性值.如:</p>
<p><code>${user.home}</code></p>
<h3 id="环境变量属性">环境变量属性</h3>
<p>都是以<code>env.</code>开头。如：<code>${env.JAVA_HOME}</code>.
可以通过<code>mvn help:system</code>查看。</p>
<h2 id="为不同环境使用不同配置">为不同环境使用不同配置</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	&lt;profiles&gt;
		&lt;profile&gt;
			&lt;!-- 开发环境 --&gt;
			&lt;id&gt;dev&lt;/id&gt;
			&lt;activation&gt;
				&lt;!-- 是否是默认 --&gt;
				&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
			&lt;/activation&gt;
		&lt;/profile&gt;
		&lt;profile&gt;
			&lt;!-- 测试环境 --&gt;
			&lt;id&gt;test&lt;/id&gt;
		&lt;/profile&gt;
		&lt;profile&gt;
			&lt;!-- 生产环境 --&gt;
			&lt;id&gt;production&lt;/id&gt;
			&lt;properties&gt;
				&lt;profile.active&gt;production&lt;/profile.active&gt;
				&lt;profile.scope&gt;provided&lt;/profile.scope&gt;
			&lt;/properties&gt;
		&lt;/profile&gt;
	&lt;/profiles&gt;
</code></pre></div><h3 id="一般资源过滤">一般资源过滤</h3>
<p>还要注意，默认情况下，只有<code>pom.xml</code>时使用这些属性时，才会被解析。如果是在其他文件里，也要使用该属性时，默认情况下，是不是解析其他配置文件的占位符的变量的。</p>
<p>要开启maven解析其他资源文件来使用pom.xml里定义的属性，还需要配置如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;build&gt;
		&lt;resources&gt;
			&lt;resource&gt;
				&lt;!-- 资源目录 --&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;!-- 是否解析占位符<span style="color:#e6db74">${}</span> --&gt;
				&lt;filtering&gt;true&lt;/filtering&gt;
				&lt;includes&gt;
					&lt;include&gt;**/*.properties&lt;/include&gt;
					&lt;include&gt;**/*.xml&lt;/include&gt;
				&lt;/includes&gt;
			&lt;/resource&gt;
		&lt;/resources&gt;
   		&lt;testResources&gt;
			&lt;resource&gt;
				&lt;!-- 资源目录 --&gt;
				&lt;directory&gt;src/test/resources&lt;/directory&gt;
				&lt;!-- 是否解析占位符<span style="color:#e6db74">${}</span> --&gt;
				&lt;filtering&gt;true&lt;/filtering&gt;
				&lt;includes&gt;
					&lt;include&gt;**/*.properties&lt;/include&gt;
					&lt;include&gt;**/*.xml&lt;/include&gt;
				&lt;/includes&gt;
			&lt;/resource&gt;
		&lt;/testResources&gt;
&lt;/build&gt;
</code></pre></div><p>然后在使用时，通过参数<code>-P</code>来激某个profile，如：</p>
<p>开发环境：
<code>mvn clean install -Pdev</code></p>
<p>生产环境：
<code>mvn clean install -Pproductino</code></p>
<h3 id="web-资源过滤">web 资源过滤</h3>
<p>要配置 <code>maven-war-plugin</code> 插件才行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">			&lt;plugin&gt;
				&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.6&lt;/version&gt;
				&lt;configuration&gt;
					&lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;
					&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
					&lt;webResources&gt;
						&lt;webResource&gt;
							&lt;directory&gt;WebContent&lt;/directory&gt;
							&lt;!-- 解析web资源 --&gt;
							&lt;filtering&gt;true&lt;/filtering&gt;
							&lt;includes&gt;
								&lt;include&gt;**/*.css&lt;/include&gt;
								&lt;include&gt;**/*.js&lt;/include&gt;
							&lt;/includes&gt;
						&lt;/webResource&gt;
					&lt;/webResources&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
</code></pre></div><h3 id="激活-profile">激活 profile</h3>
<h4 id="命令行激活">命令行激活</h4>
<p><code>mvn clean install -PprofileId1,profileId2</code></p>
<h4 id="settingsxml-文件显式激活">settings.xml 文件显式激活</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;activeProfiles&gt;
    &lt;activeProfile&gt;dev&lt;/activeProfile&gt;
&lt;/activeProfiles&gt;
</code></pre></div><h4 id="系统属性激活">系统属性激活</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;profiles&gt;
	&lt;profile&gt;
		&lt;activation&gt;
			&lt;property&gt;
				&lt;name&gt;actProp&lt;/name&gt;
				&lt;value&gt;x&lt;/value&gt;
			&lt;/property&gt;
		&lt;/activation&gt;
	&lt;/profile&gt;
&lt;/profiles&gt;
</code></pre></div><p>这表示，如果存在系统属性<code>actProp</code>，并且其值为<code>x</code>，则激活该profile。如果没有value，则表示只要存在<code>actProp</code>属性，就激活。
系统属性，通过如下传递：</p>
<p><code>mvn clean install -DactProp=x</code></p>
<h4 id="操作系统激活">操作系统激活</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;profiles&gt;
	&lt;profile&gt;
		&lt;activation&gt;
			&lt;os&gt;
				&lt;name&gt;Windows XP&lt;/name&gt;
				&lt;family&gt;Windows&gt;&lt;/family&gt;
				&lt;arch&gt;x86&lt;/arch&gt;
				&lt;version&gt;5.1.2600&lt;/version&gt;
			&lt;/os&gt;
		&lt;/activation&gt;
	&lt;/profile&gt;
&lt;/profiles&gt;
</code></pre></div><h4 id="文件存在与否激活">文件存在与否激活</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;profiles&gt;
	&lt;profile&gt;
		&lt;activation&gt;
			&lt;file&gt;
				&lt;missing&gt;x.properties&lt;/missing&gt;
				&lt;exists&gt;y.properties&lt;/exists&gt;
			&lt;/file&gt;
		&lt;/activation&gt;
	&lt;/profile&gt;
&lt;/profiles&gt;
</code></pre></div><h4 id="默认激活">默认激活</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;id&gt;dev&lt;/id&gt;
		&lt;activation&gt;
			&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
		&lt;/activation&gt;
	&lt;/profile&gt;
&lt;/profiles&gt;
</code></pre></div><h2 id="经典的-pomxml-配置例子">经典的 pom.xml 配置例子</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;project
	xmlns<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
	xmlns:xsi<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	xsi:schemaLocation<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span>
&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

	&lt;!-- 所属项目名 --&gt;
	&lt;groupId&gt;jetty-demo&lt;/groupId&gt;

	&lt;!-- 模块名 --&gt;
	&lt;artifactId&gt;jetty-demo&lt;/artifactId&gt;

	&lt;!-- 版本 --&gt;
	&lt;version&gt;1.0.0&lt;/version&gt;

	&lt;!-- 打包方式 --&gt;
	&lt;packaging&gt;war&lt;/packaging&gt;

	&lt;!-- 项目的url --&gt;
	&lt;url&gt;http://emacsist.github.io&lt;/url&gt;

	&lt;!-- 开发者人员 --&gt;
	&lt;developers&gt;
		&lt;developer&gt;
			&lt;id&gt;emacsist&lt;/id&gt;
			&lt;name&gt;Zhiyong yang&lt;/name&gt;
			&lt;email&gt;emacsist@qq.com&lt;/email&gt;
			&lt;roles&gt;
				&lt;role&gt;admin&lt;/role&gt;
			&lt;/roles&gt;
		&lt;/developer&gt;
	&lt;/developers&gt;

	&lt;!-- SpringMVC 版本 --&gt;
	&lt;properties&gt;
		&lt;spring.version&gt;4.0.1.RELEASE&lt;/spring.version&gt;
		&lt;!— checkstyle配置文件 —&gt;
		&lt;!—     config/sun_checks.xml - Sun Microsystems Definition <span style="color:#f92672">(</span>default<span style="color:#f92672">)</span>.  
			config/maven_checks.xml - Maven Development Definitions.  
			config/turbine_checks.xml - Turbine Development Definitions.  
			config/avalon_checks.xml - Avalon Development Definitions.
		—&gt;
               &lt;checkstyle.config.location&gt;config/maven_checks.xml&lt;/checkstyle.config.location&gt; 
	&lt;/properties&gt;


	&lt;!-- 这里填写项目的git地址 --&gt;
	&lt;scm&gt;
		&lt;connection&gt;scm:git:git.coding.net/emacsist/Jetty_Maven.git&lt;/connection&gt;
		&lt;developerConnection&gt;scm:git:git.coding.net/emacsist/Jetty_Maven.git&lt;/developerConnection&gt;
		&lt;url&gt;git://git.coding.net/emacsist/Jetty_Maven.git&lt;/url&gt;
	&lt;/scm&gt;

	&lt;!-- 使用 mvn site 命令生成站点报告，生成后的文件在 target/site/ 目录下 --&gt;
	&lt;reporting&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;
				&lt;configuration&gt;
				   &lt;dependencyLocationsEnabled&gt;false&lt;/dependencyLocationsEnabled&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
			&lt;!-- 报告里生成java doc --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.10.3&lt;/version&gt;
				&lt;configuration&gt;
					&lt;show&gt;public&lt;/show&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
			&lt;!-- 报告里生成源码目录树 --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-jxr-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.5&lt;/version&gt;
			&lt;/plugin&gt;


			&lt;!— mvn checkstyle:checkstyle checkstyle —&gt;
			&lt;plugin&gt;  
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;  
				&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;  
				&lt;version&gt;2.9.1&lt;/version&gt;  
			&lt;/plugin&gt;  

			&lt;!-- 注意，要先执行一下 mvn package 之后再执行 mvn findbugs:gui 检查bugs —&gt;
			&lt;plugin&gt;  
		                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;  
               			&lt;artifactId&gt;findbugs-maven-plugin&lt;/artifactId&gt;  
		                &lt;version&gt;3.0.2&lt;/version&gt;  
               			 &lt;configuration&gt;  
		                    &lt;xmlOutput&gt;true&lt;/xmlOutput&gt;  
               			    &lt;effort&gt;Max&lt;/effort&gt;  
		                &lt;/configuration&gt;  
		       &lt;/plugin&gt;  

			&lt;!-- 源码分析报告PMD --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt;
				&lt;version&gt;3.5&lt;/version&gt;
				&lt;configuration&gt;
					&lt;!-- 默认情况下，如果没有什么问题的话，它会忽略PMD的报告，这里是无论如何都显示报告 --&gt;
					&lt;skipEmptyReport&gt;false&lt;/skipEmptyReport&gt;
					&lt;!-- 将所有模块的分析，集成到一起 --&gt;
					&lt;aggregate&gt;true&lt;/aggregate&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;

			&lt;!-- 更改记录，这个要配置上面的 scm 配置 --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.3&lt;/version&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/reporting&gt;

	&lt;build&gt;
		&lt;!-- 源码目录 --&gt;
		&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;
		&lt;plugins&gt;
			&lt;!--mvn source:jar 打包源码的插件 --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.4&lt;/version&gt;
				&lt;executions&gt;
					&lt;execution&gt;
						&lt;id&gt;attach-sources&lt;/id&gt;
						&lt;phase&gt;verify&lt;/phase&gt;
						&lt;goals&gt;
							&lt;goal&gt;jar-no-fork&lt;/goal&gt;
						&lt;/goals&gt;
					&lt;/execution&gt;
				&lt;/executions&gt;
			&lt;/plugin&gt;

			&lt;!-- mvn site 站点插件 --&gt;
			&lt;plugin&gt;
				&lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;
			&lt;/plugin&gt;

			&lt;!-- mvn javadoc:javadoc 用于生成java doc --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.10.3&lt;/version&gt;
				&lt;configuration&gt;
					&lt;show&gt;private&lt;/show&gt;
					&lt;nohelp&gt;true&lt;/nohelp&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;

			&lt;!-- mvn pmd:pmd 源码分析插件 --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt;
				&lt;version&gt;3.5&lt;/version&gt;
				&lt;configuration&gt;
					&lt;!-- 默认情况下，如果没有什么问题的话，它会忽略PMD的报告，这里是无论如何都显示报告 --&gt;
					&lt;skipEmptyReport&gt;false&lt;/skipEmptyReport&gt;

					&lt;!-- 将所有模块的分析，集成到一起 --&gt;
					&lt;aggregate&gt;true&lt;/aggregate&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;

			&lt;!-- mvn jetty:run Jetty 插件 --&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
				&lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
				&lt;version&gt;9.0.6.v20130930&lt;/version&gt;
				&lt;configuration&gt;
					&lt;!-- Jetty容器配置 --&gt;
					&lt;httpConnector&gt;
						&lt;!-- 监听的端口 --&gt;
						&lt;port&gt;8080&lt;/port&gt;
					&lt;/httpConnector&gt;
					&lt;!-- 热部署，间隔多少秒重新扫描文件，默认为0,即不进行热部署 --&gt;
					&lt;scanIntervalSeconds&gt;1&lt;/scanIntervalSeconds&gt;

					&lt;!-- web应用配置 --&gt;
					&lt;webApp&gt;
						&lt;contextPath&gt;/&lt;/contextPath&gt;
						&lt;!-- web.xml路径 --&gt;
						&lt;descriptor&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/WebContent/WEB-INF/web.xml&lt;/descriptor&gt;
					&lt;/webApp&gt;

					&lt;!-- 生成classes的目录 --&gt;
					&lt;classesDirectory&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/target/classes&lt;/classesDirectory&gt;
					&lt;webAppSourceDirectory&gt;<span style="color:#e6db74">${</span>project.basedir<span style="color:#e6db74">}</span>/WebContent/&lt;/webAppSourceDirectory&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;

			&lt;!-- mvn clean package 打包 war 的插件 --&gt;
			&lt;plugin&gt;
				&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
				&lt;version&gt;2.6&lt;/version&gt;
				&lt;configuration&gt;
					&lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;
					&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
					&lt;webResources&gt;
						&lt;webResource&gt;
							&lt;directory&gt;WebContent&lt;/directory&gt;
							&lt;!-- 解析web资源 --&gt;
							&lt;filtering&gt;true&lt;/filtering&gt;
							&lt;includes&gt;
								&lt;include&gt;**/*.css&lt;/include&gt;
								&lt;include&gt;**/*.js&lt;/include&gt;
							&lt;/includes&gt;
						&lt;/webResource&gt;
					&lt;/webResources&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;

			&lt;!-- 编译器插件 --&gt;
			&lt;plugin&gt;
				&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
				&lt;version&gt;3.3&lt;/version&gt;
				&lt;configuration&gt;
					&lt;source&gt;1.8&lt;/source&gt;
					&lt;target&gt;1.8&lt;/target&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;junit&lt;/groupId&gt;
			&lt;artifactId&gt;junit&lt;/artifactId&gt;
			&lt;version&gt;3.8.1&lt;/version&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;!-- Spring dependencies start --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;
			&lt;version&gt;<span style="color:#e6db74">${</span>spring.version<span style="color:#e6db74">}</span>&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;
			&lt;version&gt;<span style="color:#e6db74">${</span>spring.version<span style="color:#e6db74">}</span>&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
			&lt;version&gt;<span style="color:#e6db74">${</span>spring.version<span style="color:#e6db74">}</span>&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;!-- Spring dependencies end --&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></div><h2 id="编写maven插件">编写Maven插件</h2>
<ol>
<li>
<p>创建一个maven-plugin项目：它本身也是一个maven项目，不过，packaging 必须是<code>maven-plugin</code>.可以使用<code>maven-archetype-plugin</code>快速创建一个Maven插件项目</p>
</li>
<li>
<p>为插件编写目标。每个插件都必须包含一个或多个目标，Maven称为<code>Mojo</code>（与POJO对应）。编写插件时，必须提供一个或者多个继承自<code>AbstractMojo</code>类。</p>
</li>
<li>
<p>为目标提供配置点。</p>
</li>
<li>
<p>编写代码，实现目标行为</p>
</li>
<li>
<p>错误处理及日志。</p>
</li>
<li>
<p>测试插件</p>
</li>
</ol>
<h2 id="一个简单的项目">一个简单的项目</h2>
<p><a href="https://coding.net/u/emacsist/p/Jetty_Maven/git">Jetty-demo</a></p>
<h2 id="maven-打包分离-jar">Maven 打包分离 jar</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#f92672">&lt;build&gt;</span>
        <span style="color:#f92672">&lt;finalName&gt;</span>app<span style="color:#f92672">&lt;/finalName&gt;</span>
        <span style="color:#f92672">&lt;plugins&gt;</span>
            <span style="color:#f92672">&lt;plugin&gt;</span>
                <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
                <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span>
            <span style="color:#f92672">&lt;/plugin&gt;</span>

            <span style="color:#75715e">&lt;!-- 复制依赖的插件 --&gt;</span>
            <span style="color:#f92672">&lt;plugin&gt;</span>
                <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#f92672">&lt;/groupId&gt;</span>
                <span style="color:#f92672">&lt;artifactId&gt;</span>maven-dependency-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span>
                <span style="color:#f92672">&lt;executions&gt;</span>
                    <span style="color:#f92672">&lt;execution&gt;</span>
                        <span style="color:#f92672">&lt;id&gt;</span>copy-dependencies<span style="color:#f92672">&lt;/id&gt;</span>
                        <span style="color:#f92672">&lt;phase&gt;</span>package<span style="color:#f92672">&lt;/phase&gt;</span>
                        <span style="color:#f92672">&lt;goals&gt;</span>
                            <span style="color:#f92672">&lt;goal&gt;</span>copy-dependencies<span style="color:#f92672">&lt;/goal&gt;</span>
                        <span style="color:#f92672">&lt;/goals&gt;</span>
                        <span style="color:#f92672">&lt;configuration&gt;</span>
                            <span style="color:#f92672">&lt;outputDirectory&gt;</span>${project.build.directory}/lib<span style="color:#f92672">&lt;/outputDirectory&gt;</span>
                            <span style="color:#f92672">&lt;overWriteReleases&gt;</span>false<span style="color:#f92672">&lt;/overWriteReleases&gt;</span>
                            <span style="color:#f92672">&lt;overWriteSnapshots&gt;</span>true<span style="color:#f92672">&lt;/overWriteSnapshots&gt;</span>
                        <span style="color:#f92672">&lt;/configuration&gt;</span>
                    <span style="color:#f92672">&lt;/execution&gt;</span>
                <span style="color:#f92672">&lt;/executions&gt;</span>
            <span style="color:#f92672">&lt;/plugin&gt;</span>
            <span style="color:#f92672">&lt;plugin&gt;</span>
                <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#f92672">&lt;/groupId&gt;</span>
                <span style="color:#f92672">&lt;artifactId&gt;</span>maven-jar-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span>
                <span style="color:#f92672">&lt;configuration&gt;</span>
                    <span style="color:#f92672">&lt;archive&gt;</span>
                        <span style="color:#f92672">&lt;manifest&gt;</span>
                            <span style="color:#f92672">&lt;addClasspath&gt;</span>true<span style="color:#f92672">&lt;/addClasspath&gt;</span>
                            <span style="color:#f92672">&lt;classpathPrefix&gt;</span>lib/<span style="color:#f92672">&lt;/classpathPrefix&gt;</span>
                            <span style="color:#f92672">&lt;mainClass&gt;</span>com.your.company.App<span style="color:#f92672">&lt;/mainClass&gt;</span>
                        <span style="color:#f92672">&lt;/manifest&gt;</span>
                    <span style="color:#f92672">&lt;/archive&gt;</span>
                <span style="color:#f92672">&lt;/configuration&gt;</span>
            <span style="color:#f92672">&lt;/plugin&gt;</span>
        <span style="color:#f92672">&lt;/plugins&gt;</span>
    <span style="color:#f92672">&lt;/build&gt;</span>
</code></pre></div>
    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">emacsist</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2015-10-12</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">Reward</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/wxpay.jpeg">
        <span>wechat</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/alipay.jpeg">
        <span>alipay</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/maven/">maven</a>
          
          <a href="/tags/java/">java</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="https://emacsist.github.io/2015/10/16/maven-%E4%B8%8E-spring-%E7%BB%93%E5%90%88%E8%BF%9B%E8%A1%8C%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Maven 与 Spring 结合进行模块化开发实践</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="https://emacsist.github.io/2015/10/10/java-restful-web-service%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
            <span class="next-text nav-default">&lt;Java RESTful Web Service&gt;学习笔记</span>
            <span class="prev-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="comments-gitment"></div>
  <link rel="stylesheet" href="/lib/gitment/gitment-0.0.3.min.css">
    <script src="/lib/gitment/gitment-0.0.3.min.js"></script>
  <script type="text/javascript">
  const gitment = new Gitment({
    id: '2015-10-12 17:03:38 \x2b0000 UTC',
    title: 'Maven复习',
    link: decodeURI(location.href),
    desc: '快速升级 利用软链接方式来进行升级 软链接目录： ~\/maven\/current 代表当前要使用',
    owner: 'emacsist',
    repo: 'emacsist.github.io',
    oauth: {
      client_id: 'd1456501fba5329f3afa',
      client_secret: 'd1ecbb7929a49de947215701320c60b312a72d3a'
    }
  })
  gitment.render('comments-gitment')
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:emacsist@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/emacsist2016" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://plus.google.com/u/0/114200054463267049438" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/emacsist" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/emacist" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/emacsist/" class="iconfont icon-douban" title="douban"></a>
  <a href="https://emacsist.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>


  <span class="copyright-year">
    &copy; 
    
      2014 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">emacsist</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  
<script type="text/javascript" src="/dist/even.min.js?v=3.1.1"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-118327923-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>









<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1278300546'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1278300546%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</body>
</html>
